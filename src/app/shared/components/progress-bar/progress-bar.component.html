<div class="content">
  <div class="locate-between mb-2">
    <h2 class="m-0">Создать сотрудника</h2>
    <button mat-flat-button class="assets-btn-sm ghost-btn" routerLink="/employees">
      <mat-icon>clear</mat-icon>
      Отмена
    </button>
  </div>
  <section class="employee-form app-card">
    <main>
      <div class="assets-progress">
        <mat-progress-bar mode="determinate" [value]="processPercentage"></mat-progress-bar>
        <p *ngIf="currentTab?.hint ;else noHint" class="main-text text-right mt-2">{{currentTab.hint}}</p>
        <ng-template #noHint>
          <p
            class="text-gray text-right mt-2">{{selectedIndex + 1 + "/" + totalTabCount + "  шагов для создания сотрудника"}}</p>
        </ng-template>
      </div>
      <mat-tab-group class="progress-tab-group" [selectedIndex]="selectedIndex"
                     (selectedTabChange)="onSelectedTabChange($event)">
        <mat-tab label="Личная информация">
          <div class="p-3 mt-3">
            <div class="block-group">
              <div>
                <h4>1. Личные данные</h4>
                <p>
                  Укажите полную информацию о сотруднике: ФИО, пол, дату рождения и т.д</p>
              </div>
              <div>
                <div class="block-control">
                  <form-ui-text-input placeholder="Фамилия..." label="Фамилия"
                                      [control]="form.lastName"></form-ui-text-input>
                  <form-ui-text-input placeholder="Имя..." label="Имя"
                                      [control]="form.firstName"></form-ui-text-input>
                </div>
                <form-ui-text-input placeholder="Отчество..." label="Отчество"
                                    [control]="form.middleName"></form-ui-text-input>
                <div class="block-control">
                  <form-ui-dropdown [options]="['Мужской','Женский']" label="Выберите пол"
                                    [control]="form.genderId"></form-ui-dropdown>
                  <form-ui-date-picker [control]="form.dateOfBirth" label="Дата рождения"></form-ui-date-picker>
                </div>
              </div>
            </div>
            <!--          <app-filter-input placeholder="Last Name" label="Last Name"></app-filter-input>-->
            <mat-divider></mat-divider>
          </div>
          <div class="p-3">
            <div class="block-group">
              <div>
                <h4>2. Паспортные данные </h4>
                <p>
                  Паспортные данные необходимы для
                  оформления сотрудника в компании </p>
              </div>
              <div>
                <form-ui-text-input placeholder="Гражданство..." label="Гражданство"
                                    [control]="form.citizenship"></form-ui-text-input>
                <div class="block-control">
                  <form-ui-text-input placeholder="ИНН..." label="ИНН"
                                      [control]="form.INN"></form-ui-text-input>
                  <form-ui-text-input placeholder="Номер паспорта..." label="Номер паспорта"
                                      [control]="form.passportNumber"></form-ui-text-input>
                </div>
                <div class="block-control">
                  <form-ui-text-input placeholder="Орган выдачи..." label="Орган выдачи"
                                      [control]="form.issuanceAuthority"></form-ui-text-input>
                  <form-ui-text-input placeholder="Дата выдачи..." label="Дата выдачи"
                                      [control]="form.issuanceDate"></form-ui-text-input>
                </div>

              </div>

            </div>
            <!--          <app-filter-input placeholder="Last Name" label="Last Name"></app-filter-input>-->
            <mat-divider></mat-divider>
          </div>
          <div class="p-3">
            <div class="block-group">
              <div>
                <h4>3. Контактные данные </h4>
                <p>
                  Желательно добавить несколько номеров сотрудника.</p>
              </div>
              <div>
                <form-ui-text-input placeholder="Адрес проживания..." label="Адрес проживания"
                                    [control]="form.address"></form-ui-text-input>
                <!--           -->
                <ng-container *ngFor="let emailControl of form.emails.controls ;let i = index;">
                  <ng-container *ngIf="i === 0;else withRemoveBtn">
                    <form-ui-text-input placeholder="Личная почта..." label="Личная почта" [prefix]="true"
                                        iconName="mail"
                                        [control]="$any(emailControl.get('name'))"></form-ui-text-input>
                  </ng-container>

                  <ng-template #withRemoveBtn>
                    <div class="block-control">
                      <form-ui-text-input placeholder="Личная почта..." label="Личная почта" [prefix]="true"
                                          iconName="mail"
                                          [control]="$any(emailControl.get('name'))"></form-ui-text-input>

                      <button mat-flat-button class="w-auto assets-btn ghost-btn-deep-1 icon-only-btn ml-1"
                              (click)="form.remove(i,form.emails)">
                        <mat-icon>clear</mat-icon>
                      </button>

                    </div>
                  </ng-template>


                </ng-container>
                <button mat-flat-button class="assets-btn ghost-btn-deep-1 w-100 mb-3"
                        (click)="this.form.addControl('emails')">
                  Добавить дополнительную почту
                </button>
                <ng-container *ngFor="let phoneControl of form.employeePhoneNumbers.controls ;let i = index;">
                  <ng-container *ngIf="i === 0;else withRemoveBtn">
                    <form-ui-text-input placeholder="Личный телефон..." label="Личный телефон" [prefix]="true"
                                        iconName="phone"
                                        [control]="$any(phoneControl.get('name'))">
                    </form-ui-text-input>
                  </ng-container>

                  <ng-template #withRemoveBtn>
                    <div class="block-control">
                      <form-ui-text-input placeholder="Личный телефон..." label="Личный телефон" [prefix]="true"
                                          iconName="phone"
                                          [control]="$any(phoneControl.get('name'))">
                      </form-ui-text-input>

                      <button mat-flat-button class="w-auto assets-btn ghost-btn-deep-1 icon-only-btn ml-1"
                              (click)="form.remove(i,form.employeePhoneNumbers)">
                        <mat-icon>clear</mat-icon>
                      </button>

                    </div>
                  </ng-template>


                </ng-container>

                <button mat-flat-button class="assets-btn ghost-btn-deep-1 w-100 mb-3"
                        (click)="this.form.addControl('employeePhoneNumbers')">
                  Добавить дополнительную телефон
                </button>

              </div>
            </div>
            <mat-divider></mat-divider>
          </div>

          <div class="p-3">
            <div class="block-group">
              <div>
                <h4>4. Образование </h4>
                <p>
                  Здесь указывается информация об образовании сотрудника : университеты, колледжи, курсы.</p>
              </div>
              <div>
                <!---->
                <ng-container *ngFor="let educationControl of form.educations.controls ;let i = index;">
                  <ng-container *ngIf="i === 0;else withRemoveBtn">
                    <div class="mb-3">
                      <form-ui-text-input placeholder="Университет..." label="Университет"
                                          [control]="$any(educationControl.get('university'))"></form-ui-text-input>
                      <div class="w-100 locate-between">
                        <form-ui-text-input class="w-75 mr-3" placeholder="Специальность..." label="Специальность"
                                            [control]="$any(educationControl.get('specialization'))"></form-ui-text-input>
                        <form-ui-text-input class="w-25" placeholder="Степень..." label="Степень"
                                            [control]="$any(educationControl.get('degree'))"></form-ui-text-input>
                      </div>
                      <form-ui-date-picker [control]="$any(educationControl.get('dateOfGraduate'))"
                                           label="Дата окончания"></form-ui-date-picker>
                    </div>

                  </ng-container>
                  <ng-template #withRemoveBtn>
                    <div class="mb-3 locate-between">
                      <p class="text-main text-lg m-0">Запись об образовании</p>
                      <button mat-flat-button class="assets-btn ghost-btn" (click)="form.remove(i,form.educations)">
                        Удалить
                      </button>
                    </div>
                    <div class="mb-3">
                      <form-ui-text-input placeholder="Университет..." label="Университет"
                                          [control]="$any(educationControl.get('university'))"></form-ui-text-input>
                      <div class="w-100 locate-between">
                        <form-ui-text-input class="w-75 mr-3" placeholder="Специальность..." label="Специальность"
                                            [control]="$any(educationControl.get('specialization'))"></form-ui-text-input>
                        <form-ui-text-input class="w-25" placeholder="Степень..." label="Степень"
                                            [control]="$any(educationControl.get('degree'))"></form-ui-text-input>
                      </div>
                      <form-ui-date-picker [control]="$any(educationControl.get('dateOfGraduate'))"
                                           label="Дата окончания"></form-ui-date-picker>
                    </div>
                  </ng-template>


                </ng-container>
                <button mat-flat-button class="assets-btn ghost-btn-deep-1 w-100"
                        (click)="form.addControl('educations')">Добавить учреждение
                </button>
              </div>

            </div>
            <mat-divider></mat-divider>
          </div>

        </mat-tab>
        <mat-tab label="Рабочая информация">
          <div class="p-3 mt-3">
            <div class="block-group">
              <div>
                <h4>1. Карьера</h4>
                <p>
                  В данной секции указывается история должностей сотрудника</p>
              </div>
              <div>

                <ng-container *ngFor="let positionControl of form.positionsList.controls ;let i = index;">
                  <ng-container *ngIf="i === 0;else withRemoveBtn">
                    <div class="mb-3">
                      <form-ui-dropdown label="Должность"
                                        [options]="['Frontend','Backend']" s
                                        [control]="$any(positionControl.get('positionId'))"></form-ui-dropdown>
                      <form-ui-date-picker [control]="$any(positionControl.get('appointmentDate'))"
                                           label="Дата принятия на дол-ть"></form-ui-date-picker>
                      <div class="pl-2 pb-3">
                        <mat-checkbox #currentlyWorking [checked]="true">Работает в настоящее время на данной должности
                        </mat-checkbox>
                      </div>
                      <form-ui-date-picker
                        [disabled]="!currentlyWorking.checked"
                        [control]="$any(positionControl.get('finishDate'))"
                        label="Дата завершения"></form-ui-date-picker>
                      <form-ui-dropdown label="Специальность"
                                        [options]="['JavaScript','Python']"
                                        [control]="$any(positionControl.get('speciality'))"></form-ui-dropdown>
                      <div class="block-control">
                        <form-ui-dropdown [options]="['Male','Female']" label="Уровень специальности"
                                          [control]="$any(positionControl.get('specialityLevel'))"></form-ui-dropdown>
                        <form-ui-date-picker [control]="$any(positionControl.get('certificationDate'))"
                                             label="Дата аттестации"></form-ui-date-picker>
                      </div>
                    </div>

                  </ng-container>
                  <ng-template #withRemoveBtn>
                    <div class="mb-3 locate-between">
                      <p class="text-main text-lg m-0">Запись о должности </p>
                      <button mat-flat-button class="assets-btn ghost-btn" (click)="form.remove(i,form.positionsList)">
                        Удалить
                      </button>
                    </div>
                    <div class="mb-3">
                      <form-ui-dropdown label="Должность"
                                        [options]="['Frontend','Backend']"
                                        [control]="$any(positionControl.get('positionId'))">

                      </form-ui-dropdown>
                      <form-ui-date-picker [control]="$any(positionControl.get('appointmentDate'))"
                                           label="Дата принятия на дол-ть"></form-ui-date-picker>
                      <div class="pl-2 pb-3">
                        <mat-checkbox #isEmployedCurrently>Работает в настоящее время на данной должности</mat-checkbox>
                      </div>
                      <form-ui-date-picker [control]="$any(positionControl.get('finishDate'))"
                                           [disabled]="!isEmployedCurrently.checked"
                                           label="Дата завершения"></form-ui-date-picker>
                      <form-ui-dropdown label="Специальность"
                                        [options]="['JavaScript','Python']"
                                        [control]="$any(positionControl.get('speciality'))"></form-ui-dropdown>
                      <div class="block-control">
                        <form-ui-dropdown [options]="['Junior','Middle']" label="Уровень специальности"
                                          [control]="$any(positionControl.get('specialityLevel'))"></form-ui-dropdown>
                        <form-ui-date-picker [control]="$any(positionControl.get('certificationDate'))"
                                             label="Дата аттестации"></form-ui-date-picker>
                      </div>

                    </div>
                  </ng-template>


                </ng-container>
                <button mat-flat-button class="assets-btn ghost-btn-deep-1 w-100"
                        (click)="form.addControl('positionsList')">Добавить должность
                </button>
                <!--                <form-ui-dropdown label="Должность" [control]="control"></form-ui-dropdown>-->
                <!--                &lt;!&ndash;                <div class="block-control">&ndash;&gt;-->
                <!--                <form-ui-date-picker [control]="control1" label="Дата принятия на дол-ть"></form-ui-date-picker>-->
                <!--                <div class="pl-2 pb-3">-->
                <!--                  <mat-checkbox>Работает в настоящее время на данной должности</mat-checkbox>-->
                <!--                </div>-->
                <!--                <form-ui-date-picker [control]="control1" label="Дата завершения"></form-ui-date-picker>-->
                <!--                &lt;!&ndash;                </div>&ndash;&gt;-->
                <!--                <form-ui-dropdown label="Специальность"-->
                <!--                                  [control]="control"></form-ui-dropdown>-->
                <!--                <div class="block-control">-->
                <!--                  <form-ui-dropdown [options]="['Male','Female']" label="Уровень специальности"-->
                <!--                                    [control]="control"></form-ui-dropdown>-->
                <!--                  <form-ui-date-picker [control]="control1" label="Дата аттестации"></form-ui-date-picker>-->
                <!--                </div>-->

                <!--                <button mat-flat-button class="assets-btn ghost-btn-deep-1 text-sm w-100">Добавить должность-->
                <!--                </button>-->
              </div>
            </div>
            <mat-divider></mat-divider>
          </div>
          <!--          <div class="p-3 mt-3">-->
          <!--            <div class="block-group">-->
          <!--              <div>-->
          <!--                <h4>1. Статус</h4>-->
          <!--                <p>-->
          <!--                  Сотрудник может быть активен- доступен к работе, в отпуске-->
          <!--                  или не активен - не доступен к работе, например, взял академический-->
          <!--                  или бессрочный отпуск</p>-->
          <!--              </div>-->
          <!--              <div>-->
          <!--                <app-button-group></app-button-group>-->
          <!--              </div>-->
          <!--            </div>-->
          <!--            <mat-divider></mat-divider>-->
          <!--          </div>-->
          <div class="p-3 mt-3">
            <div class="block-group">
              <div>
                <h4>2. Скиллы</h4>
                <p>
                  Набор soft и hard skills определяется для каждого сотрудника</p>
              </div>
              <div>
                <form-select-search
                  [multiple]="true"
                  [control]="control1"
                  [chips]="true"
                  label="Выберите hard skills"
                  [options]="[
    {value: 1, label: 'TypeScript'},
    {value: 2, label: 'JavaScript'},
    {value: 3, label: 'Java'},
    {value: 4, label: 'DataBase'},
    {value: 5, label: 'Competitive Programming'},
    {value: 6, label: 'Design Patterns'},
  ]">
                  <button mat-flat-button class="assets-btn-sm primary-btn w-100">Добавить
                    Hard Skill
                  </button>

                </form-select-search>
                <form-select-search
                  [multiple]="true"
                  [control]="control"
                  [chips]="true"
                  label="Выберите soft skills"
                  [options]="[
    {value: 1, label: 'Коммуникация'},
    {value: 2, label: 'Критическое мышление'},
    {value: 3, label: 'Сервисность/Клиентоориентированность'},
    {value: 4, label: 'Управление проектами, людьми и собой'},
    {value: 5, label: 'Наставничество и менторинг'},
    {value: 6, label: 'Решение проблем'},
  ]">
                  <button mat-flat-button class="assets-btn-sm primary-btn w-100">Добавить Soft Skill
                  </button>

                </form-select-search>
              </div>
            </div>
            <mat-divider></mat-divider>
          </div>
          <div class="p-3 mt-3">
            <div class="block-group">
              <div>
                <h4>3. Контактные данные</h4>
                <p>
                  Укажите рабочие контактные данные </p>
              </div>
              <div>
                <div class="mb-4">
                  <form-ui-text-input placeholder="Табельный номер..." label="Табельный номер" [prefix]="true"
                                      iconName="phone" hint="Табельный номер является уникальным для каждого сотрудника"
                                      [control]="form.personnelNumber">
                  </form-ui-text-input>
                </div>
                <div class="block-control">
                  <form-ui-text-input placeholder="Рабочая почта..." label="Рабочая почта" [prefix]="true"
                                      iconName="mail"
                                      [control]="form.corporateEmail"></form-ui-text-input>
                  <form-ui-text-input placeholder="Рабочий телефон..." label="Рабочий телефон" [prefix]="true"
                                      iconName="phone"
                                      [control]="form.corporatePhoneNumber">
                  </form-ui-text-input>

                </div>
              </div>
            </div>
            <mat-divider></mat-divider>
          </div>
        </mat-tab>
        <mat-tab label="Дополнительная информация">
          <div class="p-3 mt-3">
            <div class="block-group">
              <div>
                <!--                <h4>1. Сведения о близких родственниках</h4>-->
                <!--                <p>-->
                <!--                  Степень родства - муж, жена, брат, сестра или брат сотрудника. Вы можете добавить от одного до-->
                <!--                  нескольких родственников</p>-->
              </div>

              <div>


                <!--                <ng-container *ngFor="let relativeControl of form.relatives.controls ;let i = index;">-->
                <!--                  <ng-container *ngIf="i === 0;else withRemoveBtn">-->
                <!--                    <div class="block-control">-->
                <!--                      <form-ui-text-input label="Степень родства" placeholder="Степень родства..."-->
                <!--                                          [control]="$any(relativeControl.get('relationDegree'))"></form-ui-text-input>-->
                <!--                      <form-ui-date-picker label="Дата рождения"-->
                <!--                                           [control]="$any(relativeControl.get('dob'))"></form-ui-date-picker>-->
                <!--                    </div>-->

                <!--                    <div class="block-control">-->
                <!--                      <form-ui-text-input label="Имя" placeholder="Имя..."-->
                <!--                                          [control]="$any(relativeControl.get('firstName'))"></form-ui-text-input>-->
                <!--                      <form-ui-text-input label="Фамилия" placeholder="Фамилия..."-->
                <!--                                          [control]="$any(relativeControl.get('lastName'))"></form-ui-text-input>-->
                <!--                    </div>-->
                <!--                    <form-ui-text-input label="Отчество" placeholder="Отчество..."-->
                <!--                                        [control]="$any(relativeControl.get('middleName'))"></form-ui-text-input>-->
                <!--                    <form-ui-text-input label="Адрес (Место жительства)" placeholder="Адрес (Место жительства)..."-->
                <!--                                        [control]="$any(relativeControl.get('address'))"></form-ui-text-input>-->
                <!--                    <form-ui-text-input label="Телефон" placeholder="Телефон..." [prefix]="true" iconName="phone"-->
                <!--                                        [control]="$any(relativeControl.get('phoneNumber'))"></form-ui-text-input>-->

                <!--                  </ng-container>-->
                <!--                  <ng-template #withRemoveBtn>-->
                <!--                    <div class="mb-3 locate-between">-->
                <!--                      <p class="text-main text-lg m-0">Запись о родственниках </p>-->
                <!--                      <button mat-flat-button class="assets-btn ghost-btn" (click)="form.remove(i,form.relatives)">-->
                <!--                        Удалить-->
                <!--                      </button>-->
                <!--                    </div>-->
                <!--                    <div class="block-control">-->
                <!--                      <form-ui-text-input label="Степень родства" placeholder="Степень родства..."-->
                <!--                                          [control]="$any(relativeControl.get('relationDegree'))"></form-ui-text-input>-->
                <!--                      <form-ui-date-picker label="Дата рождения"-->
                <!--                                           [control]="$any(relativeControl.get('dob'))"></form-ui-date-picker>-->
                <!--                    </div>-->

                <!--                    <div class="block-control">-->
                <!--                      <form-ui-text-input label="Имя" placeholder="Имя..."-->
                <!--                                          [control]="$any(relativeControl.get('firstName'))"></form-ui-text-input>-->
                <!--                      <form-ui-text-input label="Фамилия" placeholder="Фамилия..."-->
                <!--                                          [control]="$any(relativeControl.get('lastName'))"></form-ui-text-input>-->
                <!--                    </div>-->
                <!--                    <form-ui-text-input label="Отчество" placeholder="Отчество..."-->
                <!--                                        [control]="$any(relativeControl.get('middleName'))"></form-ui-text-input>-->
                <!--                    <form-ui-text-input label="Адрес (Место жительства)" placeholder="Адрес (Место жительства)..."-->
                <!--                                        [control]="$any(relativeControl.get('address'))"></form-ui-text-input>-->
                <!--                    <form-ui-text-input label="Телефон" placeholder="Телефон..." [prefix]="true" iconName="phone"-->
                <!--                                        [control]="$any(relativeControl.get('phoneNumber'))"></form-ui-text-input>-->
                <!--                  </ng-template>-->


                <!--                </ng-container>-->
                <!--                <button mat-flat-button class="assets-btn ghost-btn-deep-1 w-100"-->
                <!--                        (click)="form.addControl('relatives')">Добавить родственника-->
                <!--                </button>-->

              </div>
            </div>
            <!--            <div class="app-card relative-wrapper">-->
            <!--              <img src="assets/images/relatives.svg" alt="relatives"/>-->
            <!--              <h3 class="text-dark text-md mt-2">Нет сведений о родственниках</h3>-->
            <!--              <button mat-flat-button class="assets-btn-sm ghost-btn-deep-1 icon-left">-->
            <!--                <mat-icon>add</mat-icon>-->
            <!--                Добавить родственника-->
            <!--              </button>-->
            <!--            </div>-->
            <div class="locate-between form-group-title">
              <h4 class="m-0">1. Сведения о близких родственниках</h4>
              <button mat-flat-button class="assets-btn-sm ghost-btn-deep-1 icon-left">
                <mat-icon>add</mat-icon>
                Добавить родственник
              </button>
            </div>
            <div class="container mt-4">
              <div class="row">
                <div class="col-4">
                  <app-card-relatives [relative]="relative"></app-card-relatives>
                </div>
                <div class="col-4">
                  <app-card-relatives [relative]="relative"></app-card-relatives>
                </div>
                <div class="col-4">
                  <app-card-relatives [relative]="relative"></app-card-relatives>
                </div>
              </div>
            </div>
            <mat-divider></mat-divider>
          </div>
          <div class="p-3 mt-3">
            <div class="block-group">
              <div>
                <h4>2. Интересы</h4>
                <p>
                  Добавьте информацию о хобби, интересах сотрудника. Хэштеги категоризируют сотрудников по
                  интересам.</p>
              </div>
              <div>
                <ui-textarea label="Впишите информацию о сотруднике" placeholder="Впишите информацию о сотруднике"
                             [control]="$any(form.interests.get('generalInfo'))"></ui-textarea>
                <form-select-search [control]="$any(form.interests.get('hashtags'))" label="Выберите hashtag"
                                    [chips]="true"
                                    [options]="[{label:'Ski',value:1},{label:'Singing',value:2}]" [multiple]="true">
                  <button mat-flat-button class="assets-btn-sm primary-btn w-100">Добавить Hashtag</button>
                </form-select-search>
              </div>
            </div>
          </div>
          <mat-divider></mat-divider>
        </mat-tab>
      </mat-tab-group>
    </main>
    <footer>
      <button mat-stroked-button class="assets-btn outline-btn"
              *ngIf="selectedIndex>0"
              (click)="selectedIndex=selectedIndex-1">
        <mat-icon>arrow_back</mat-icon>
        Назад
      </button>
      <button mat-flat-button class="assets-btn primary-btn ml-2"
              *ngIf="selectedIndex<totalTabCount-1;else submit"
              [disabled]="!isFormValid"
              (click)="selectedIndex=selectedIndex+1">Далее
      </button>
      <ng-template #submit>
        <button mat-flat-button class="assets-btn primary-btn ml-2 mt-auto"
                (click)="onSubmit()"
        >
          Создать сотрудника
        </button>
      </ng-template>
    </footer>
  </section>
</div>
